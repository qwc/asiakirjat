server:
  address: "0.0.0.0"
  port: 8080
  # base_path: "/docs"  # Optional: URL prefix for subdirectory deployment (e.g., https://example.com/docs/)

database:
  driver: "sqlite"     # sqlite, postgres, mysql
  dsn: "data/asiakirjat.db"

auth:
  initial_admin:
    username: "admin"
    password: "changeme"
  session:
    cookie_name: "asiakirjat_session"
    max_age: 86400       # seconds (24h)
    secure: false        # set to true behind HTTPS
  ldap:
    enabled: false
    url: "ldap://localhost:389"
    # skip_verify: Skip TLS certificate verification for LDAPS connections
    skip_verify: false
    bind_dn: "cn=admin,dc=example,dc=com"
    bind_password: ""
    base_dn: "dc=example,dc=com"
    user_filter: "(uid={{.Username}})"
    admin_group: "cn=admins,ou=groups,dc=example,dc=com"
    editor_group: "cn=editors,ou=groups,dc=example,dc=com"
    # viewer_group: If set, users must be in admin_group, editor_group, OR viewer_group
    # to be allowed. If empty (default), all LDAP users are allowed as viewers.
    viewer_group: ""
    # project_groups: Map LDAP groups to project access (synced to DB on startup)
    # project_groups:
    #   - group: "cn=project-a-editors,ou=groups,dc=example,dc=com"
    #     project: "project-a"
    #     role: "editor"
    #   - group: "cn=docs-viewers,ou=groups,dc=example,dc=com"
    #     project: "docs"
    #     role: "viewer"
  oauth2:
    enabled: false
    client_id: ""
    client_secret: ""
    auth_url: ""
    token_url: ""
    userinfo_url: ""
    redirect_url: "http://localhost:8080/auth/callback"
    scopes: "openid profile email"
    # groups_claim: The claim in userinfo/token containing group memberships
    # Common values: "groups", "roles", "cognito:groups"
    groups_claim: "groups"
    # Role mapping: assign global roles based on OAuth2 group membership
    # admin_group: "asiakirjat-admins"
    # editor_group: "asiakirjat-editors"
    # viewer_group: If set, users must be in admin_group, editor_group, OR viewer_group
    # to be allowed. If empty (default), all OAuth2 users are allowed as viewers.
    viewer_group: ""
    # project_groups: Map OAuth2 groups to project access (synced to DB on startup)
    # project_groups:
    #   - group: "project-a-editors"
    #     project: "project-a"
    #     role: "editor"
    #   - group: "docs-viewers"
    #     project: "docs"
    #     role: "viewer"

# access: Controls who can view projects with "private" visibility.
# Projects have three visibility levels:
#   public  — anyone can view (including anonymous users)
#   private — only users/groups listed here can view
#   custom  — only users with explicit per-project access can view
# access:
#   private:
#     viewers:
#       users: ["user1", "user2"]
#       ldap_groups: ["cn=readers,ou=groups,dc=example,dc=com"]
#       oauth2_groups: ["readers"]
#     editors:
#       users: ["editor1"]
#       ldap_groups: ["cn=writers,ou=groups,dc=example,dc=com"]
#       oauth2_groups: ["writers"]

storage:
  base_path: "data/projects"

branding:
  # app_name: Custom application name displayed in navbar (default: "asiakirjat")
  # app_name: "My Docs"
  # logo_url: URL or path to custom logo image (displayed in navbar)
  # logo_url: "/static/custom/logo.png"
  # custom_css: Filename of custom CSS in static/custom/ directory (for colors/branding)
  # custom_css: "custom.css"
