{{define "title"}}Profile - {{appName}}{{end}}

{{define "content"}}
<div class="admin-page">
    <h1>Profile</h1>

    {{if .Error}}
    <div class="flash flash-error">{{.Error}}</div>
    {{end}}
    {{if .Success}}
    <div class="flash flash-success">{{.Success}}</div>
    {{end}}

    <table class="admin-table">
        <tr><th>Username</th><td>{{.User.Username}}</td></tr>
        <tr><th>Email</th><td>{{.User.Email}}</td></tr>
        <tr><th>Role</th><td>{{.User.Role}}</td></tr>
        <tr><th>Auth Source</th><td>{{.User.AuthSource}}</td></tr>
    </table>

    {{if eq .User.AuthSource "builtin"}}
    <div class="admin-create-form">
        <h2>Change Password</h2>
        <form method="POST" action="{{url "/profile/password"}}">
            <div class="form-group">
                <label for="current_password">Current Password</label>
                <input type="password" id="current_password" name="current_password" required>
            </div>
            <div class="form-group">
                <label for="new_password">New Password</label>
                <input type="password" id="new_password" name="new_password" required>
            </div>
            <div class="form-group">
                <label for="confirm_password">Confirm New Password</label>
                <input type="password" id="confirm_password" name="confirm_password" required>
            </div>
            <button type="submit" class="btn btn-primary">Change Password</button>
        </form>
    </div>
    {{else}}
    <p>Your password is managed by an external provider ({{.User.AuthSource}}).</p>
    {{end}}
</div>
{{end}}
